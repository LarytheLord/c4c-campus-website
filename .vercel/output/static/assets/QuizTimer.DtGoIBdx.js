import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.GIa-TyKg.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./index.CMF_dOlt.js";function C({startedAt:u,timeLimit:r,onTimeUp:l}){const[c,f]=i.useState(0),[s,m]=i.useState(!1),d=i.useCallback(()=>{if(!r)return null;const n=new Date(u).getTime(),x=Date.now(),o=Math.floor((x-n)/1e3),v=r*60;return Math.max(0,v-o)},[u,r]);if(i.useEffect(()=>{if(!r)return;const n=d();n!==null&&(f(n),n===0&&(m(!0),l?.()));const x=setInterval(()=>{const o=d();o!==null&&(f(o),o===0&&!s&&(m(!0),l?.()))},1e3);return()=>clearInterval(x)},[r,d,l,s]),!r)return e.jsxs("div",{className:"flex items-center gap-2 text-text-muted",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"No time limit"})]});const h=Math.floor(c/60),g=c%60,t=c/(r*60)*100,a=()=>s||t<10?"text-error":t<25?"text-warning":"text-primary",p=()=>s||t<10?"bg-error/10 border-error":t<25?"bg-warning/10 border-warning":"bg-primary/10 border-primary";return e.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border-2 ${p()}`,children:[e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-12 h-12 transform -rotate-90",children:[e.jsx("circle",{cx:"24",cy:"24",r:"20",stroke:"currentColor",strokeWidth:"4",fill:"none",className:"text-surface-hover"}),e.jsx("circle",{cx:"24",cy:"24",r:"20",stroke:"currentColor",strokeWidth:"4",fill:"none",className:a(),strokeDasharray:`${2*Math.PI*20}`,strokeDashoffset:`${2*Math.PI*20*(1-t/100)}`,strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("svg",{className:`w-6 h-6 ${a()}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`text-2xl font-bold font-mono ${a()}`,children:[String(h).padStart(2,"0"),":",String(g).padStart(2,"0")]}),e.jsx("div",{className:`text-sm ${a()}`,children:s?"Time is up!":"Time remaining"})]}),!s&&t<25&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:`w-6 h-6 ${t<10?"text-error animate-pulse":"text-warning"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})}export{C as QuizTimer};
