import{s as n}from"../assets/supabase.DdTcER9f.js";import"../assets/index.CS-uK3Uq.js";import"../assets/_commonjsHelpers.D6-XlEtG.js";document.getElementById("login-form")?.addEventListener("submit",async s=>{s.preventDefault();const a=s.target,i=a.elements.namedItem("email").value,d=a.elements.namedItem("password").value,t=document.getElementById("error-message"),e=a.querySelector('button[type="submit"]');if(!(!t||!e)){e.disabled=!0,e.textContent="Signing in...",t.classList.add("hidden");try{const{data:o,error:c}=await n.auth.signInWithPassword({email:i,password:d});if(c)t.textContent="We don't recognize that email address or password. Please check your credentials or contact info@codeforcompassion.com if you believe this is an error.",t.classList.remove("hidden"),e.disabled=!1,e.textContent="Sign In";else{const{data:r}=await n.from("applications").select("status, role").eq("user_id",o.user.id).single();if(r?.status==="approved")switch(r.role){case"admin":window.location.href="/teacher/courses";break;case"teacher":window.location.href="/teacher/courses";break;case"student":default:window.location.href="/dashboard";break}else window.location.href="/application-status"}}catch(o){console.error("Login error:",o),t.textContent="An error occurred. Please try again later.",t.classList.remove("hidden"),e.disabled=!1,e.textContent="Sign In"}}});
