---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout
  title="Apply - C4C Campus"
  description="Apply to the weekend bootcamp, hackathons, or full-time accelerator at Code for Compassion Campus. In-person in Bengaluru or remote from anywhere."
>
  <div class="section">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Hero -->
      <div class="text-center mb-12">
        <h1 class="text-5xl font-black mb-4">
          <span class="text-gradient">Apply</span>
        </h1>
        <p class="text-xl text-text-muted">
          Join developers from across India and beyond building AI that creates real-world impact. Applications open year-round.
        </p>
      </div>

      <!-- Program Selector -->
      <div class="grid md:grid-cols-3 gap-6 mb-16">
        <button id="show-bootcamp" class="card border-2 border-primary hover:shadow-lg transition-all text-left program-selector">
          <div class="text-4xl mb-3">ðŸ“š</div>
          <h2 class="text-2xl font-bold mb-2">Weekend Bootcamp</h2>
          <p class="text-text-muted mb-4">10 weeks, Saturdays, 2.5 hour classes. Remote and in-person options. No technical skills required.</p>
          <p class="text-sm font-bold text-primary">â†’ Apply to Bootcamp</p>
        </button>

        <button id="show-hackathon" class="card border-2 border-info hover:shadow-lg transition-all text-left program-selector">
          <div class="text-4xl mb-3">âš¡</div>
          <h2 class="text-2xl font-bold mb-2">Global Hackathons</h2>
          <p class="text-text-muted mb-4">Join events worldwide.</p>
          <p class="text-sm font-bold text-info">â†’ Register for Hackathon</p>
        </button>

        <button id="show-accelerator" class="card border-2 border-accent hover:shadow-lg transition-all text-left program-selector">
          <div class="text-4xl mb-3">ðŸš€</div>
          <h2 class="text-2xl font-bold mb-2">Full-Time Accelerator</h2>
          <p class="text-text-muted mb-4">12 weeks in-person in Bengaluru. Optional 4-week pre-accelerator for animal advocacy projects. Take your prototype to production.</p>
          <p class="text-sm font-bold text-accent">â†’ Apply to Accelerator</p>
        </button>
      </div>

      <!-- Bootcamp Application -->
      <div id="bootcamp" class="mb-16 hidden">
        <div class="card bg-surface">
          <h2 class="text-3xl font-bold mb-6">Weekend Bootcamp Application</h2>

          <div class="bg-primary/5 p-4 rounded-lg mb-6">
            <p class="text-sm text-text-muted mb-3">
              <strong>10 weeks of weekend classes</strong> with a 2.5 hour class each Saturday. Options for both remote and in-person participation in Bengaluru.
            </p>
            <p class="text-sm text-text-muted mb-3">
              <strong>What we're looking for:</strong> Curiosity about building compassionate AI.
              Commitment to animal advocacy, climate action, and/or AI safety. No technical skills required.
            </p>
            <p class="text-sm text-text-muted">
              <strong>Full scholarships available</strong> for SCs, OBCs, EWS, DNTs, and the Transgender community.
            </p>
          </div>

          <form id="bootcamp-form" class="space-y-6">
            <div id="bootcamp-start-notice" class="bg-primary/10 border-l-4 border-primary p-4 rounded-r-lg mb-6">
              <p class="font-bold text-primary">Next bootcamp starts February 8, 2026</p>
            </div>

            <!-- Personal Info -->
            <div>
              <label for="bootcamp-name" class="block font-bold mb-2">Name *</label>
              <input type="text" id="bootcamp-name" name="name" required class="w-full px-4 py-3 border border-border rounded-lg" />
            </div>

            <div>
              <label for="bootcamp-email" class="block font-bold mb-2">Email *</label>
              <input type="email" id="bootcamp-email" name="email" required class="w-full px-4 py-3 border border-border rounded-lg" />
            </div>

            <div>
              <label class="block font-bold mb-2">WhatsApp Number (optional)</label>
              <input type="tel" name="whatsapp" class="w-full px-4 py-3 border border-border rounded-lg" placeholder="+91" />
              <p class="text-xs text-text-muted mt-1">Helpful for urgent updates. Discord is our main communication channel.</p>
            </div>

            <div>
              <label class="block font-bold mb-2">Location *</label>
              <input type="text" name="location" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="City, Country" />
            </div>

            <div>
              <label class="block font-bold mb-2">Discord Handle *</label>
              <input type="text" name="discord" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="username#0000 or @username" />
              <p class="text-xs text-text-muted mt-1">We coordinate heavily on Discord. Don't have one? <a href="https://discord.gg/qewprMy7G6" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">Join our server first</a></p>
            </div>

            <div>
              <label class="block font-bold mb-2">Create Password *</label>
              <input
                type="password"
                name="password"
                id="bootcamp-password"
                required
                minlength="12"
                pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]).{12,}$"
                class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="Min 12 chars: Aa1!@#"
              />
              <p class="text-xs text-text-muted mt-1">Must be 12+ characters long. Must include: uppercase (A-Z), lowercase (a-z), number (0-9), special char (!@#$%^&* etc.)</p>
            </div>

            <div>
              <label class="block font-bold mb-2">Confirm Password *</label>
              <input type="password" name="confirmPassword" id="bootcamp-confirmPassword" required minlength="12" class="w-full px-4 py-3 border border-border rounded-lg" placeholder="Re-enter password" />
            </div>

            <!-- Track Selection -->
            <div>
              <label class="block font-bold mb-2">Which track? *</label>
              <select name="track" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Animal Advocacy</option>
                <option>Climate Action</option>
                <option>AI Safety & Security</option>
                <option>Hybrid (all three)</option>
              </select>
              <p class="text-xs text-text-muted mt-1">
                Not sure which track fits your interests?
                <a href="/tracks" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">
                  Learn more about each track
                </a>
              </p>
            </div>


            <!-- Scholarship Section -->
            <div class="border border-border rounded-lg p-4 bg-surface/50">
              <h4 class="font-bold mb-2">Scholarship Application (Optional)</h4>
              <p class="text-sm text-text-muted mb-3">Full scholarships available for SCs, OBCs, EWS, DNTs, and the Transgender community.</p>

              <label class="flex items-center gap-2 mb-3">
                <input type="checkbox" id="scholarship-requested" name="scholarshipRequested" />
                <span>I would like to apply for a scholarship</span>
              </label>

              <div id="scholarship-category-container" class="hidden">
                <label for="scholarship-category" class="block font-medium mb-2">Eligibility Category *</label>
                <select id="scholarship-category" name="scholarshipCategory" class="w-full px-4 py-3 border border-border rounded-lg">
                  <option value="">Select your category...</option>
                  <option value="SC">SC (Scheduled Caste)</option>
                  <option value="OBC">OBC (Other Backward Class)</option>
                  <option value="EWS">EWS (Economically Weaker Section)</option>
                  <option value="DNT">DNT (De-notified Tribes)</option>
                  <option value="Transgender">Transgender</option>
                </select>
              </div>
            </div>

            <div>
              <label class="block font-bold mb-2">Why do you want to learn to engineer compassion? *</label>
              <textarea name="motivation" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="What draws you to building AI with ethics built in?"></textarea>
            </div>

            <div>
              <label class="block font-bold mb-2">Technical experience (if any)</label>
              <textarea name="technicalExperience" rows="3" class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="Any coding, automation, or technical experience? Totally fine if none!"></textarea>
            </div>

            <div>
              <label for="bootcamp-commitment" class="block font-bold mb-2">Can you commit to 10 weeks (Saturdays, 2.5 hours each)? *</label>
              <select id="bootcamp-commitment" name="commitment" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Yes, in-person in Bengaluru</option>
                <option>Yes, remote participation</option>
                <option>Need to discuss timing</option>
                <option>No, but interested in future cohorts</option>
              </select>
            </div>

            <div>
              <label for="bootcamp-protected-class" class="block font-bold mb-2">Do you identify as part of a protected class? *</label>
              <select id="bootcamp-protected-class" name="protectedClass" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Scheduled Castes (SCs)</option>
                <option>Other Backward Classes (OBCs)</option>
                <option>Economically Weaker Sections (EWS)</option>
                <option>Denotified Tribes (DNTs)</option>
                <option>The Transgender community</option>
                <option>A class covered in the UK Equality Act 2010</option>
                <option>Prefer not to say</option>
                <option>None of the above</option>
              </select>
            </div>

            <div>
              <label for="bootcamp-career-goals" class="block font-bold mb-2">What do you want to get out of this for your career path? *</label>
              <textarea id="bootcamp-career-goals" name="careerGoals" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="e.g., career change into impact space, developing career in AI, additional projects for portfolio, entrepreneurship, community of like-minded builders"></textarea>
            </div>

            <div>
              <label class="flex items-start gap-3">
                <input type="checkbox" required class="mt-1" />
                <span class="text-sm text-text-muted">
                  I consent for my data to be used for analysis purposes. We don't sell your data to third parties.
                </span>
              </label>
            </div>

            <button type="submit" class="btn btn-primary btn-lg w-full">Submit Bootcamp Application</button>

            <p class="text-sm text-text-muted text-center">
              Applications reviewed on rolling basis. Response within 2 weeks.
            </p>
          </form>
        </div>
      </div>

      <!-- Accelerator Application -->
      <div id="accelerator" class="mb-16 hidden">
        <div class="card bg-surface">
          <h2 class="text-3xl font-bold mb-6">Full-Time Accelerator Application</h2>

          <div class="bg-accent/5 p-4 rounded-lg mb-6">
            <p class="text-sm text-text-muted mb-3">
              <strong>12-week program:</strong> In-person at C4C Campus in Bengaluru. Intensive development, mentorship, pitch preparation, and investor introductions.
            </p>
            <p class="text-sm text-text-muted mb-3">
              <strong>Animal Advocacy Pre-Accelerator (AARC):</strong> Optional 4-week programme (Feb 9 - Mar 8, 2026) for animal protection projects. Teams arrive with prototypes, pitch to investors in week 1, and successful teams graduate to the main accelerator.
            </p>
            <p class="text-sm text-text-muted">
              <strong>What we're looking for:</strong> Developers with an existing prototype or MVP.
              We provide accommodation, meals, compute access, and per-team stipends (INR 200,000 - 1,000,000).
            </p>
          </div>

          <form id="accelerator-form" class="space-y-6">
            <!-- Personal Info -->
            <div>
              <label class="block font-bold mb-2">Name *</label>
              <input type="text" name="name" required class="w-full px-4 py-3 border border-border rounded-lg" />
            </div>

            <div>
              <label class="block font-bold mb-2">Email *</label>
              <input type="email" name="email" required class="w-full px-4 py-3 border border-border rounded-lg" />
            </div>

            <div>
              <label class="block font-bold mb-2">WhatsApp Number (optional)</label>
              <input type="tel" name="whatsapp" class="w-full px-4 py-3 border border-border rounded-lg" placeholder="+91" />
              <p class="text-xs text-text-muted mt-1">Helpful for urgent updates. Discord is our main communication channel.</p>
            </div>

            <div>
              <label class="block font-bold mb-2">Location *</label>
              <input type="text" name="location" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="City, Country" />
            </div>

            <div>
              <label class="block font-bold mb-2">Discord Handle *</label>
              <input type="text" name="discord" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="username#0000 or @username" />
              <p class="text-xs text-text-muted mt-1">We coordinate heavily on Discord. Don't have one? <a href="https://discord.gg/qewprMy7G6" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">Join our server first</a></p>
            </div>

            <div>
              <label class="block font-bold mb-2">Create Password *</label>
              <input
                type="password"
                name="password"
                id="accelerator-password"
                required
                minlength="12"
                pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]).{12,}$"
                class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="Min 12 chars: Aa1!@#"
              />
              <p class="text-xs text-text-muted mt-1">Must be 12+ characters long. Must include: uppercase (A-Z), lowercase (a-z), number (0-9), special char (!@#$%^&* etc.)</p>
            </div>

            <div>
              <label class="block font-bold mb-2">Confirm Password *</label>
              <input type="password" name="confirmPassword" id="accelerator-confirmPassword" required minlength="12" class="w-full px-4 py-3 border border-border rounded-lg" placeholder="Re-enter password" />
            </div>

            <!-- Track Selection -->
            <div>
              <label class="block font-bold mb-2">Which track? *</label>
              <select name="track" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Animal Advocacy</option>
                <option>Climate Action</option>
                <option>AI Safety & Security</option>
                <option>Hybrid (all three)</option>
              </select>
              <p class="text-xs text-text-muted mt-1">
                Not sure which track fits your project?
                <a href="/tracks" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">
                  Learn more about each track
                </a>
              </p>
            </div>

            <!-- Prototype Details -->
            <div>
              <label class="block font-bold mb-2">Project Name *</label>
              <input type="text" name="projectName" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="What's your project called?" />
            </div>

            <div>
              <label class="block font-bold mb-2">Describe your prototype/MVP *</label>
              <textarea name="projectDescription" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="What does it do? What stage is it at? What problem does it solve?"></textarea>
            </div>

            <div>
              <label class="block font-bold mb-2">Link to prototype (GitHub, demo, etc.) *</label>
              <input type="url" name="prototypeLink" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="https://" />
            </div>

            <div>
              <label class="block font-bold mb-2">Tech stack *</label>
              <input type="text" name="techStack" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="e.g., Python, React, PostgreSQL, etc." />
            </div>

            <div>
              <label class="block font-bold mb-2">Who will use this tool? *</label>
              <textarea name="targetUsers" rows="3" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="What organizations or movements need this?"></textarea>
            </div>

            <div>
              <label class="block font-bold mb-2">What do you need help with to get to production? *</label>
              <textarea name="productionNeeds" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="e.g., scaling, deployment, security, finding users, etc."></textarea>
            </div>

            <!-- Technical Background -->
            <div>
              <label class="block font-bold mb-2">Technical experience *</label>
              <textarea name="technicalExperience" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="What have you built? What languages/tools do you know?"></textarea>
            </div>

            <div>
              <label class="block font-bold mb-2">Team size *</label>
              <input type="number" name="teamSize" required min="1" class="w-full px-4 py-3 border border-border rounded-lg" placeholder="How many people on your team?" />
            </div>

            <div>
              <label class="block font-bold mb-2">Current stage *</label>
              <select name="currentStage" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Prototype/MVP</option>
                <option>Beta with users</option>
                <option>Live in production</option>
              </select>
            </div>

            <!-- Commitment -->
            <div>
              <label class="block font-bold mb-2">Can you commit to the 12-week program in-person in Bengaluru? *</label>
              <select name="commitment" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Yes, I can commit to the full 12-week accelerator</option>
                <option>Yes, interested in 4-week animal advocacy pre-accelerator (AARC)</option>
                <option>Yes, interested in both pre-accelerator and full accelerator</option>
                <option>Need to discuss timing</option>
                <option>No, but interested in future cohorts</option>
              </select>
            </div>

            <div>
              <label class="block font-bold mb-2">Are you building a for-profit or non-profit? *</label>
              <select name="funding" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>For-profit</option>
                <option>Non-profit</option>
                <option>Not sure yet</option>
              </select>
            </div>

            <div>
              <label for="accelerator-protected-class" class="block font-bold mb-2">Do you identify as part of a protected class? *</label>
              <select id="accelerator-protected-class" name="protectedClass" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Scheduled Castes (SCs)</option>
                <option>Other Backward Classes (OBCs)</option>
                <option>Economically Weaker Sections (EWS)</option>
                <option>Denotified Tribes (DNTs)</option>
                <option>The Transgender community</option>
                <option>A class covered in the UK Equality Act 2010</option>
                <option>Prefer not to say</option>
                <option>None of the above</option>
              </select>
            </div>

            <div>
              <label for="accelerator-career-goals" class="block font-bold mb-2">What do you want to get out of this for your career path? *</label>
              <textarea id="accelerator-career-goals" name="careerGoals" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="e.g., career change into impact space, developing career in AI, additional projects for portfolio, entrepreneurship, community of like-minded builders"></textarea>
            </div>

            <div>
              <label class="flex items-start gap-3">
                <input type="checkbox" required class="mt-1" />
                <span class="text-sm text-text-muted">
                  I understand C4C provides accommodation, meals, compute access, and stipends for accelerator participants in Bengaluru.
                </span>
              </label>
            </div>

            <div>
              <label class="flex items-start gap-3">
                <input type="checkbox" required class="mt-1" />
                <span class="text-sm text-text-muted">
                  I consent for my data to be used for analysis purposes. We don't sell your data to third parties.
                </span>
              </label>
            </div>

            <button type="submit" class="btn btn-accent btn-lg w-full">Submit Accelerator Application</button>

            <p class="text-sm text-text-muted text-center">
              Applications reviewed within 2 weeks. Interviews for shortlisted candidates.
            </p>
          </form>
        </div>
      </div>

      <!-- Hackathon Registration -->
      <div id="hackathon" class="mb-16 hidden">
        <div class="card bg-surface">
          <h2 class="text-3xl font-bold mb-6">Join Our Global Hackathons</h2>

          <div class="bg-info/5 p-4 rounded-lg mb-6">
            <p class="text-sm text-text-muted">
              <strong>Year-round events worldwide.</strong> All skill levels welcome. We run hackathons globally in cities like London, Silicon Valley, Washington DC, Berlin, and Mumbai. Each event has its own registration process.
            </p>
          </div>

          <!-- Discord CTA -->
          <div class="bg-gradient-to-br from-info/10 to-primary/10 border-2 border-info rounded-lg p-6 mb-8 text-center">
            <div class="text-4xl mb-3">ðŸ’¬</div>
            <h3 class="text-xl font-bold mb-3">Join Our Discord Community</h3>
            <p class="text-base text-text-muted mb-4">
              Get notified about upcoming hackathons worldwide, meet your team before events, and connect with the global C4C community.
            </p>
            <a href="https://discord.gg/qewprMy7G6" target="_blank" rel="noopener noreferrer" class="btn btn-info btn-lg inline-block">
              Join Discord â†’
            </a>
            <p class="text-sm text-text-muted mt-3">
              <strong>Required:</strong> Join Discord at least 1 week before any hackathon to be placed in teams.
            </p>
          </div>

          <!-- Upcoming Hackathons -->
          <div class="mb-8">
            <h3 class="text-2xl font-bold mb-4">Upcoming Hackathons</h3>

            <div class="card bg-surface text-center py-12">
              <div class="text-5xl mb-4">ðŸ“…</div>
              <h4 class="text-xl font-bold mb-2">No Upcoming Hackathons Announced Yet</h4>
              <p class="text-base text-text-muted mb-6">
                We're currently planning our next global hackathons. Stay tuned for updates!
              </p>
              <a href="https://discord.gg/qewprMy7G6" target="_blank" rel="noopener noreferrer" class="btn btn-primary inline-flex items-center">
                Join Discord for Updates
                <span class="ml-2">â†’</span>
              </a>
            </div>
          </div>

          <!-- Past Events -->
          <div class="mb-6">
            <h3 class="text-2xl font-bold mb-4">Past Events</h3>

            <!-- Bengaluru Hackathon (Past) -->
            <div class="card border-l-4 border-gray-400 mb-4 opacity-75">
              <div class="flex items-start justify-between gap-4 mb-3">
                <div>
                  <span class="inline-block bg-gray-200 text-gray-600 text-xs font-bold px-2 py-1 rounded mb-2">COMPLETED</span>
                  <h4 class="text-xl font-bold">Bengaluru Hackathon - January 2026</h4>
                  <p class="text-base text-text-muted">January 16, 2026 â€¢ Bengaluru, India</p>
                </div>
                <div class="text-3xl">ðŸ‡®ðŸ‡³</div>
              </div>
              <p class="text-sm text-text-muted">
                Code for Compassion Campus event held at The Yard, Carlton Towers. Focused on building AI tools for animal advocacy and climate action.
              </p>
            </div>

            <!-- DC Hackathon (Past) -->
            <div class="card border-l-4 border-gray-400 mb-4 opacity-75">
              <div class="flex items-start justify-between gap-4 mb-3">
                <div>
                  <span class="inline-block bg-gray-200 text-gray-600 text-xs font-bold px-2 py-1 rounded mb-2">COMPLETED</span>
                  <h4 class="text-xl font-bold">Code 4 Compassion DC</h4>
                  <p class="text-base text-text-muted">November 9, 2025 â€¢ Washington, DC</p>
                </div>
                <div class="text-3xl">ðŸ‡ºðŸ‡¸</div>
              </div>
              <p class="text-sm text-text-muted">
                Held at The George Washington University Law School. Paired legal professionals with developers to prototype AI-powered tools for animal protection law.
              </p>
            </div>

            <!-- Berlin Hackathon (Past) -->
            <div class="card border-l-4 border-gray-400 mb-4 opacity-75">
              <div class="flex items-start justify-between gap-4 mb-3">
                <div>
                  <span class="inline-block bg-gray-200 text-gray-600 text-xs font-bold px-2 py-1 rounded mb-2">COMPLETED</span>
                  <h4 class="text-xl font-bold">Code 4 Compassion Berlin</h4>
                  <p class="text-base text-text-muted">November 16, 2025 â€¢ Berlin, Germany</p>
                </div>
                <div class="text-3xl">ðŸ‡©ðŸ‡ª</div>
              </div>
              <p class="text-sm text-text-muted">
                Berlin's first AI for animals hackathon at ProVeg International. Part of the Kickstarting 4 Good Summit.
              </p>
            </div>

            <!-- Other Past Locations -->
            <div class="card bg-surface">
              <h4 class="font-bold mb-2">Other Previous Locations</h4>
              <p class="text-base text-text-muted mb-2">
                London â€¢ Silicon Valley â€¢ Mumbai
              </p>
              <p class="text-sm text-text-muted">
                <strong>Join Discord to be notified when we announce the next hackathons in your region.</strong>
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Questions -->
      <div class="text-center card bg-surface">
        <h2 class="text-2xl font-bold mb-3">Questions?</h2>
        <p class="text-text-muted mb-4">
          Read more about the <a href="/programs" class="text-primary font-bold hover:underline">programs</a> or
          the <a href="/framework" class="text-primary font-bold hover:underline">framework</a>.
        </p>
        <p class="text-sm text-text-muted">
          Or email us: <a href="mailto:info@codeforcompassion.com" class="font-bold">info@codeforcompassion.com</a>
        </p>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
.program-selector.active-program {
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1) !important;
  transform: scale(1.02) !important;
}

#show-bootcamp.active-program {
  background: linear-gradient(to bottom right, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.05)) !important;
  border-color: rgb(59, 130, 246) !important;
  border-width: 3px !important;
}

#show-hackathon.active-program {
  background: linear-gradient(to bottom right, rgba(34, 211, 238, 0.15), rgba(34, 211, 238, 0.05)) !important;
  border-color: rgb(34, 211, 238) !important;
  border-width: 3px !important;
}

#show-accelerator.active-program {
  background: linear-gradient(to bottom right, rgba(251, 146, 60, 0.15), rgba(251, 146, 60, 0.05)) !important;
  border-color: rgb(251, 146, 60) !important;
  border-width: 3px !important;
}
</style>

<script>
// Toggle between bootcamp, accelerator, and hackathon
const showBootcampBtn = document.getElementById('show-bootcamp');
const showAcceleratorBtn = document.getElementById('show-accelerator');
const showHackathonBtn = document.getElementById('show-hackathon');
const bootcampForm = document.getElementById('bootcamp');
const acceleratorForm = document.getElementById('accelerator');
const hackathonSection = document.getElementById('hackathon');

function showSection(section: string, shouldScroll = true) {
  // Hide all sections
  bootcampForm?.classList.add('hidden');
  acceleratorForm?.classList.add('hidden');
  hackathonSection?.classList.add('hidden');

  // Remove active state from all buttons
  showBootcampBtn?.classList.remove('active-program');
  showAcceleratorBtn?.classList.remove('active-program');
  showHackathonBtn?.classList.remove('active-program');

  // Show requested section and activate button
  let targetElement = null;
  if (section === 'bootcamp') {
    bootcampForm?.classList.remove('hidden');
    showBootcampBtn?.classList.add('active-program');
    targetElement = bootcampForm;
  } else if (section === 'accelerator') {
    acceleratorForm?.classList.remove('hidden');
    showAcceleratorBtn?.classList.add('active-program');
    targetElement = acceleratorForm;
  } else if (section === 'hackathon') {
    hackathonSection?.classList.remove('hidden');
    showHackathonBtn?.classList.add('active-program');
    targetElement = hackathonSection;
  }

  // Scroll with header offset
  if (shouldScroll && targetElement) {
    const headerOffset = 80;
    const elementPosition = targetElement.getBoundingClientRect().top;
    const offsetPosition = elementPosition + window.scrollY - headerOffset;

    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth'
    });
  }
}

showBootcampBtn?.addEventListener('click', () => showSection('bootcamp'));
showAcceleratorBtn?.addEventListener('click', () => showSection('accelerator'));
showHackathonBtn?.addEventListener('click', () => showSection('hackathon'));

// Check for URL hash on page load, or show bootcamp by default
window.addEventListener('DOMContentLoaded', () => {
  // Map both 'incubator' and 'accelerator' to 'accelerator' for backward compatibility
  const sectionMap: Record<string, string> = {
    'bootcamp': 'bootcamp',
    'hackathon': 'hackathon',
    'incubator': 'accelerator',  // Legacy alias
    'accelerator': 'accelerator'
  };
  const hash = window.location.hash.substring(1); // Remove the '#'
  const targetSection = sectionMap[hash];
  if (targetSection) {
    showSection(targetSection, true);
    // Normalize legacy #incubator URL to canonical #accelerator
    if (hash === 'incubator' && targetSection === 'accelerator') {
      history.replaceState(null, '', '#accelerator');
    }
  } else {
    // No hash or unknown hash - show bootcamp by default without scrolling
    showSection('bootcamp', false);
  }
});

// Toast notification system
const toast = {
  container: null as HTMLElement | null,

  ensureContainer() {
    if (!this.container) {
      this.container = document.createElement('div');
      this.container.id = 'c4c-toast-container';
      this.container.style.cssText = `
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      `;
      document.body.appendChild(this.container);
    }
    return this.container;
  },

  show(type: 'success' | 'error' | 'warning' | 'info', message: string, title?: string) {
    const container = this.ensureContainer();
    const styles = {
      success: { bg: '#ecfdf5', border: '#a7f3d0', icon: '#059669', iconBg: '#d1fae5' },
      error: { bg: '#fef2f2', border: '#fecaca', icon: '#dc2626', iconBg: '#fee2e2' },
      warning: { bg: '#fffbeb', border: '#fde68a', icon: '#d97706', iconBg: '#fef3c7' },
      info: { bg: '#ecfeff', border: '#a5f3fc', icon: '#0891b2', iconBg: '#cffafe' },
    };
    const icons = {
      success: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />',
      error: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />',
      warning: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />',
      info: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />',
    };
    const s = styles[type];

    const toastEl = document.createElement('div');
    toastEl.setAttribute('role', 'alert');
    toastEl.style.cssText = `
      background: ${s.bg};
      border: 1px solid ${s.border};
      border-radius: 0.5rem;
      box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
      padding: 1rem;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      max-width: 24rem;
      animation: slideInRight 300ms ease-out;
    `;

    toastEl.innerHTML = `
      <div style="background: ${s.iconBg}; color: ${s.icon}; padding: 0.375rem; border-radius: 9999px; flex-shrink: 0;">
        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">${icons[type]}</svg>
      </div>
      <div style="flex: 1; min-width: 0;">
        ${title ? `<p style="font-weight: 600; color: #111827; font-size: 0.875rem; margin: 0 0 0.25rem 0;">${title}</p>` : ''}
        <p style="color: #374151; font-size: 0.875rem; margin: 0;">${message}</p>
      </div>
      <button style="flex-shrink: 0; color: #9ca3af; background: none; border: none; cursor: pointer;" aria-label="Dismiss">
        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    `;

    const closeBtn = toastEl.querySelector('button');
    const dismiss = () => {
      toastEl.style.opacity = '0';
      toastEl.style.transform = 'translateX(100%)';
      toastEl.style.transition = 'all 200ms ease-out';
      setTimeout(() => toastEl.remove(), 200);
    };
    closeBtn?.addEventListener('click', dismiss);
    setTimeout(dismiss, 6000);

    container.appendChild(toastEl);
  },

  success(message: string, title?: string) { this.show('success', message, title); },
  error(message: string, title?: string) { this.show('error', message, title); },
  warning(message: string, title?: string) { this.show('warning', message, title); },
  info(message: string, title?: string) { this.show('info', message, title); },
};

// Form handling with Supabase
async function handleFormSubmit(e: Event, program: string) {
  e.preventDefault();
  const form = e.target as HTMLFormElement;
  const submitButton = form.querySelector('button[type="submit"]') as HTMLButtonElement | null;
  const formData = new FormData(form);

  // Get form values
  const data: Record<string, any> = {
    program,
    name: formData.get('name'),
    email: formData.get('email'),
    whatsapp: formData.get('whatsapp'),
    location: formData.get('location'),
    discord: formData.get('discord'),
    password: formData.get('password'),
    confirmPassword: formData.get('confirmPassword'),
  };

  // Add program-specific fields
  if (program === 'bootcamp') {
    data.track = formData.get('track');
    data.motivation = formData.get('motivation');
    data.technicalExperience = formData.get('technicalExperience');
    data.commitment = formData.get('commitment');
    data.protectedClass = formData.get('protectedClass');
    data.careerGoals = formData.get('careerGoals');
    // Scholarship fields
    const scholarshipCheckbox = form.querySelector('#scholarship-requested') as HTMLInputElement | null;
    data.scholarshipRequested = scholarshipCheckbox?.checked || false;
    data.scholarshipCategory = data.scholarshipRequested ? formData.get('scholarshipCategory') : null;
  } else if (program === 'accelerator') {
    data.track = formData.get('track');
    data.projectName = formData.get('projectName');
    data.projectDescription = formData.get('projectDescription');
    data.prototypeLink = formData.get('prototypeLink');
    data.techStack = formData.get('techStack');
    data.targetUsers = formData.get('targetUsers');
    data.productionNeeds = formData.get('productionNeeds');
    data.technicalExperience = formData.get('technicalExperience');
    data.teamSize = formData.get('teamSize');
    data.currentStage = formData.get('currentStage');
    data.commitment = formData.get('commitment');
    data.funding = formData.get('funding');
    data.protectedClass = formData.get('protectedClass');
    data.careerGoals = formData.get('careerGoals');
  }

  // Validate passwords match
  if (data.password !== data.confirmPassword) {
    toast.error('Passwords do not match. Please try again.', 'Validation Error');
    return;
  }

  // Validate WhatsApp field if provided - prevent 'n/a' placeholder entries
  const whatsappValue = data.whatsapp as string | null;
  if (whatsappValue && (whatsappValue.toLowerCase() === 'n/a' || whatsappValue.toLowerCase() === 'na')) {
    toast.warning('Please leave WhatsApp field empty if you don\'t have one, rather than entering "n/a"', 'Validation Warning');
    return;
  }

  // Validate scholarship category if scholarship is requested
  if (data.scholarshipRequested && !data.scholarshipCategory) {
    toast.error('Please select your eligibility category for the scholarship.', 'Validation Error');
    return;
  }

  // Disable button and show loading
  if (submitButton) {
    submitButton.disabled = true;
    submitButton.textContent = 'Submitting...';
  }

  try {
    const response = await fetch('/api/apply', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });

    const result = await response.json();

    if (response.ok) {
      toast.success(result.message || 'Application submitted! Check your email to verify your account.', 'Application Received');
      form.reset();
    } else {
      // Enhanced error handling based on API error codes
      const errorCode = result.code;
      const errorMessage = result.error || result.message || 'Failed to submit application. Please try again.';
      let shouldResetForm = false;

      switch (errorCode) {
        // Authentication errors
        case 'EMAIL_ALREADY_EXISTS':
          toast.error(
            `${errorMessage} <a href="/login" style="text-decoration: underline; font-weight: 600;">Go to Login â†’</a>`,
            'Account Already Exists'
          );
          break;

        case 'WEAK_PASSWORD':
          toast.error(errorMessage, 'Password Requirements Not Met');
          break;

        case 'INVALID_EMAIL':
          toast.error(errorMessage, 'Invalid Email');
          break;

        case 'SIGNUPS_DISABLED':
          toast.error(errorMessage, 'Registration Unavailable');
          break;

        case 'RATE_LIMIT_EXCEEDED':
          toast.warning(errorMessage, 'Too Many Attempts');
          break;

        // Application errors
        case 'APPLICATION_ALREADY_EXISTS':
          toast.info(errorMessage, 'Application Already Submitted');
          shouldResetForm = true;
          break;

        // Validation errors
        case 'INVALID_PROGRAM':
        case 'INVALID_SCHOLARSHIP_CATEGORY':
        case 'INVALID_CURRENT_STAGE':
        case 'INVALID_FUNDING':
          toast.error(errorMessage, 'Invalid Input');
          break;

        case 'MISSING_REQUIRED_FIELDS':
          toast.error(errorMessage, 'Missing Information');
          break;

        case 'SCHOLARSHIP_CATEGORY_REQUIRED':
          toast.error(errorMessage, 'Scholarship Category Required');
          break;

        // Server errors
        case 'PERMISSION_ERROR':
        case 'DATABASE_ERROR':
        case 'UNKNOWN_ERROR':
        case 'UNEXPECTED_ERROR':
          toast.error(errorMessage, 'System Error');
          break;

        // Default fallback
        default:
          console.error('Unhandled error code:', errorCode, 'Status:', response.status);
          toast.error(errorMessage, 'Submission Failed');
      }

      // Only reset form for specific cases (e.g., application already exists)
      if (shouldResetForm) {
        form.reset();
      }
    }
  } catch (error) {
    console.error('Submission error:', error);
    toast.error('An error occurred. Please try again later or contact us at coders4causes@outlook.com', 'Error');
  } finally {
    if (submitButton) {
      submitButton.disabled = false;
      submitButton.textContent = program === 'bootcamp' ? 'Submit Bootcamp Application' : 'Submit Accelerator Application';
    }
  }
}

// Attach handlers
document.getElementById('bootcamp-form')?.addEventListener('submit', (e) => handleFormSubmit(e, 'bootcamp'));
document.getElementById('accelerator-form')?.addEventListener('submit', (e) => handleFormSubmit(e, 'accelerator'));

// Scholarship checkbox toggle
const scholarshipCheckbox = document.getElementById('scholarship-requested');
const scholarshipCategoryContainer = document.getElementById('scholarship-category-container');
const scholarshipCategorySelect = document.getElementById('scholarship-category');

scholarshipCheckbox?.addEventListener('change', (e) => {
  const isChecked = (e.target as HTMLInputElement).checked;
  if (isChecked) {
    scholarshipCategoryContainer?.classList.remove('hidden');
  } else {
    scholarshipCategoryContainer?.classList.add('hidden');
    if (scholarshipCategorySelect) {
      (scholarshipCategorySelect as HTMLSelectElement).value = '';
    }
  }
});

// Hide bootcamp start notice on or after February 8, 2026
const bootcampStartNotice = document.getElementById('bootcamp-start-notice');
if (bootcampStartNotice) {
  const today = new Date();
  const startDate = new Date('2026-02-08');
  if (today >= startDate) {
    bootcampStartNotice.style.display = 'none';
  }
}
</script>
