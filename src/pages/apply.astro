---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout
  title="Apply - C4C Campus"
  description="Apply to the weekend bootcamp, hackathons, or full-time accelerator at Code for Compassion Campus. In-person in Bengaluru or remote from anywhere."
>
  <div class="section">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Hero -->
      <div class="text-center mb-12">
        <h1 class="text-5xl font-black mb-4">
          <span class="text-gradient">Apply</span>
        </h1>
        <p class="text-xl text-text-muted">
          Join developers from across India and beyond building AI that creates real-world impact. Applications open year-round.
        </p>
      </div>

      <!-- Program Selector -->
      <div class="grid md:grid-cols-3 gap-6 mb-16">
        <button id="show-bootcamp" class="card border-2 border-primary hover:shadow-lg transition-all text-left program-selector">
          <div class="text-4xl mb-3">ðŸ“š</div>
          <h2 class="text-2xl font-bold mb-2">Weekend Bootcamp</h2>
          <p class="text-text-muted mb-4">10 weeks, Saturdays, 2.5 hour classes. Remote and in-person options. No technical skills required.</p>
          <p class="text-sm font-bold text-primary">â†’ Apply to Bootcamp</p>
        </button>

        <button id="show-hackathon" class="card border-2 border-info hover:shadow-lg transition-all text-left program-selector">
          <div class="text-4xl mb-3">âš¡</div>
          <h2 class="text-2xl font-bold mb-2">Global Hackathons</h2>
          <p class="text-text-muted mb-4">Join events worldwide.</p>
          <p class="text-sm font-bold text-info">â†’ Register for Hackathon</p>
        </button>

        <button id="show-incubator" class="card border-2 border-accent hover:shadow-lg transition-all text-left program-selector">
          <div class="text-4xl mb-3">ðŸš€</div>
          <h2 class="text-2xl font-bold mb-2">Full-Time Accelerator</h2>
          <p class="text-text-muted mb-4">10 weeks: 1 week in-person, 8 weeks remote, 1 week in-person in Bengaluru. Take your prototype to production.</p>
          <p class="text-sm font-bold text-accent">â†’ Apply to Accelerator</p>
        </button>
      </div>

      <!-- Bootcamp Application -->
      <div id="bootcamp" class="mb-16 hidden">
        <div class="card bg-surface">
          <h2 class="text-3xl font-bold mb-6">Weekend Bootcamp Application</h2>

          <div class="bg-primary/5 p-4 rounded-lg mb-6">
            <p class="text-sm text-text-muted mb-3">
              <strong>10 weeks of weekend classes</strong> with a 2.5 hour class each Saturday. Options for both remote and in-person participation in Bengaluru.
            </p>
            <p class="text-sm text-text-muted mb-3">
              <strong>What we're looking for:</strong> Curiosity about building compassionate AI.
              Commitment to animal advocacy, climate action, and/or AI safety. No technical skills required.
            </p>
            <p class="text-sm text-text-muted">
              <strong>Full scholarships available</strong> for SCs, OBCs, EWS, DNTs, and the Transgender community.
            </p>
          </div>

          <form id="bootcamp-form" class="space-y-6">
            <!-- Personal Info -->
            <div>
              <label for="bootcamp-name" class="block font-bold mb-2">Name *</label>
              <input type="text" id="bootcamp-name" name="name" required class="w-full px-4 py-3 border border-border rounded-lg" />
            </div>

            <div>
              <label for="bootcamp-email" class="block font-bold mb-2">Email *</label>
              <input type="email" id="bootcamp-email" name="email" required class="w-full px-4 py-3 border border-border rounded-lg" />
            </div>

            <div>
              <label class="block font-bold mb-2">WhatsApp Number *</label>
              <input type="tel" name="whatsapp" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="+91" />
            </div>

            <div>
              <label class="block font-bold mb-2">Location *</label>
              <input type="text" name="location" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="City, Country" />
            </div>

            <div>
              <label class="block font-bold mb-2">Discord Handle *</label>
              <input type="text" name="discord" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="username#0000 or @username" />
              <p class="text-xs text-text-muted mt-1">We coordinate heavily on Discord. Don't have one? <a href="https://discord.gg/qewprMy7G6" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">Join our server first</a></p>
            </div>

            <div>
              <label class="block font-bold mb-2">Create Password *</label>
              <input
                type="password"
                name="password"
                id="bootcamp-password"
                required
                minlength="12"
                pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]).{12,}$"
                class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="Min 12 chars: Aa1!@#"
              />
              <p class="text-xs text-text-muted mt-1">Must include: uppercase (A-Z), lowercase (a-z), number (0-9), special char (!@#$%^&* etc.)</p>
            </div>

            <div>
              <label class="block font-bold mb-2">Confirm Password *</label>
              <input type="password" name="confirmPassword" id="bootcamp-confirmPassword" required minlength="12" class="w-full px-4 py-3 border border-border rounded-lg" placeholder="Re-enter password" />
            </div>

            <!-- Interest -->
            <div>
              <label class="block font-bold mb-2">Which domain(s) interest you? *</label>
              <div class="space-y-2">
                <label class="flex items-center gap-2">
                  <input type="checkbox" />
                  <span>Animal advocacy</span>
                </label>
                <label class="flex items-center gap-2">
                  <input type="checkbox" />
                  <span>Climate action</span>
                </label>
                <label class="flex items-center gap-2">
                  <input type="checkbox" />
                  <span>AI safety & security</span>
                </label>
              </div>
            </div>

            <div>
              <label class="block font-bold mb-2">Why do you want to learn to engineer compassion? *</label>
              <textarea name="motivation" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="What draws you to building AI with ethics built in?"></textarea>
            </div>

            <div>
              <label class="block font-bold mb-2">Technical experience (if any)</label>
              <textarea name="technicalExperience" rows="3" class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="Any coding, automation, or technical experience? Totally fine if none!"></textarea>
            </div>

            <div>
              <label for="bootcamp-commitment" class="block font-bold mb-2">Can you commit to 10 weeks (Saturdays, 2.5 hours each)? *</label>
              <select id="bootcamp-commitment" name="commitment" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Yes, in-person in Bengaluru</option>
                <option>Yes, remote participation</option>
                <option>Need to discuss timing</option>
                <option>No, but interested in future cohorts</option>
              </select>
            </div>

            <button type="submit" class="btn btn-primary btn-lg w-full">Submit Bootcamp Application</button>

            <p class="text-sm text-text-muted text-center">
              Applications reviewed on rolling basis. Response within 2 weeks.
            </p>
          </form>
        </div>
      </div>

      <!-- Accelerator Application -->
      <div id="incubator" class="mb-16 hidden">
        <div class="card bg-surface">
          <h2 class="text-3xl font-bold mb-6">Full-Time Accelerator Application</h2>

          <div class="bg-accent/5 p-4 rounded-lg mb-6">
            <p class="text-sm text-text-muted mb-3">
              <strong>10-week program:</strong> 1 week in-person at start, 8 weeks remote work, 1 week in-person at end in Bengaluru. Clear vision of how to take your tool to production.
            </p>
            <p class="text-sm text-text-muted">
              <strong>What we're looking for:</strong> Developers with an existing prototype or MVP.
              We cover living costs and accommodation for the duration of the program.
            </p>
          </div>

          <form id="accelerator-form" class="space-y-6">
            <!-- Personal Info -->
            <div>
              <label class="block font-bold mb-2">Name *</label>
              <input type="text" name="name" required class="w-full px-4 py-3 border border-border rounded-lg" />
            </div>

            <div>
              <label class="block font-bold mb-2">Email *</label>
              <input type="email" name="email" required class="w-full px-4 py-3 border border-border rounded-lg" />
            </div>

            <div>
              <label class="block font-bold mb-2">WhatsApp Number *</label>
              <input type="tel" name="whatsapp" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="+91" />
            </div>

            <div>
              <label class="block font-bold mb-2">Location *</label>
              <input type="text" name="location" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="City, Country" />
            </div>

            <div>
              <label class="block font-bold mb-2">Discord Handle *</label>
              <input type="text" name="discord" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="username#0000 or @username" />
              <p class="text-xs text-text-muted mt-1">We coordinate heavily on Discord. Don't have one? <a href="https://discord.gg/qewprMy7G6" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">Join our server first</a></p>
            </div>

            <div>
              <label class="block font-bold mb-2">Create Password *</label>
              <input
                type="password"
                name="password"
                id="accelerator-password"
                required
                minlength="12"
                pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]).{12,}$"
                class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="Min 12 chars: Aa1!@#"
              />
              <p class="text-xs text-text-muted mt-1">Must include: uppercase (A-Z), lowercase (a-z), number (0-9), special char (!@#$%^&* etc.)</p>
            </div>

            <div>
              <label class="block font-bold mb-2">Confirm Password *</label>
              <input type="password" name="confirmPassword" id="accelerator-confirmPassword" required minlength="12" class="w-full px-4 py-3 border border-border rounded-lg" placeholder="Re-enter password" />
            </div>

            <!-- Track Selection -->
            <div>
              <label class="block font-bold mb-2">Which track? *</label>
              <select name="track" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Animal Advocacy</option>
                <option>Climate Action</option>
                <option>AI Safety & Security</option>
                <option>Hybrid (all three)</option>
              </select>
            </div>

            <!-- Prototype Details -->
            <div>
              <label class="block font-bold mb-2">Project Name *</label>
              <input type="text" name="projectName" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="What's your project called?" />
            </div>

            <div>
              <label class="block font-bold mb-2">Describe your prototype/MVP *</label>
              <textarea name="projectDescription" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="What does it do? What stage is it at? What problem does it solve?"></textarea>
            </div>

            <div>
              <label class="block font-bold mb-2">Link to prototype (GitHub, demo, etc.) *</label>
              <input type="url" name="prototypeLink" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="https://" />
            </div>

            <div>
              <label class="block font-bold mb-2">Tech stack *</label>
              <input type="text" name="techStack" required class="w-full px-4 py-3 border border-border rounded-lg" placeholder="e.g., Python, React, PostgreSQL, etc." />
            </div>

            <div>
              <label class="block font-bold mb-2">Who will use this tool? *</label>
              <textarea name="targetUsers" rows="3" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="What organizations or movements need this?"></textarea>
            </div>

            <div>
              <label class="block font-bold mb-2">What do you need help with to get to production? *</label>
              <textarea name="productionNeeds" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="e.g., scaling, deployment, security, finding users, etc."></textarea>
            </div>

            <!-- Technical Background -->
            <div>
              <label class="block font-bold mb-2">Technical experience *</label>
              <textarea name="technicalExperience" rows="4" required class="w-full px-4 py-3 border border-border rounded-lg"
                placeholder="What have you built? What languages/tools do you know?"></textarea>
            </div>

            <div>
              <label class="block font-bold mb-2">Team size *</label>
              <input type="number" name="teamSize" required min="1" class="w-full px-4 py-3 border border-border rounded-lg" placeholder="How many people on your team?" />
            </div>

            <div>
              <label class="block font-bold mb-2">Current stage *</label>
              <select name="currentStage" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Prototype/MVP</option>
                <option>Beta with users</option>
                <option>Live in production</option>
              </select>
            </div>

            <!-- Commitment -->
            <div>
              <label class="block font-bold mb-2">Can you commit to the 10-week program (1 week in-person, 8 weeks remote, 1 week in-person in Bengaluru)? *</label>
              <select name="commitment" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>Yes, I can commit to the full program</option>
                <option>Need to discuss timing</option>
                <option>No, but interested in future cohorts</option>
              </select>
            </div>

            <div>
              <label class="block font-bold mb-2">Are you building a for-profit or non-profit? *</label>
              <select name="funding" required class="w-full px-4 py-3 border border-border rounded-lg">
                <option value="">Select...</option>
                <option>For-profit</option>
                <option>Non-profit</option>
                <option>Not sure yet</option>
              </select>
            </div>

            <div>
              <label class="flex items-start gap-3">
                <input type="checkbox" required class="mt-1" />
                <span class="text-sm text-text-muted">
                  I understand C4C will cover living costs and accommodation for the duration of the program for participants traveling from out of town.
                </span>
              </label>
            </div>

            <button type="submit" class="btn btn-accent btn-lg w-full">Submit Accelerator Application</button>

            <p class="text-sm text-text-muted text-center">
              Applications reviewed within 2 weeks. Interviews for shortlisted candidates.
            </p>
          </form>
        </div>
      </div>

      <!-- Hackathon Registration -->
      <div id="hackathon" class="mb-16 hidden">
        <div class="card bg-surface">
          <h2 class="text-3xl font-bold mb-6">Join Our Global Hackathons</h2>

          <div class="bg-info/5 p-4 rounded-lg mb-6">
            <p class="text-sm text-text-muted">
              <strong>Year-round events worldwide.</strong> All skill levels welcome. We run hackathons globally in cities like London, Silicon Valley, Washington DC, Berlin, and Mumbai. Each event has its own registration process.
            </p>
          </div>

          <!-- Discord CTA -->
          <div class="bg-gradient-to-br from-info/10 to-primary/10 border-2 border-info rounded-lg p-6 mb-8 text-center">
            <div class="text-4xl mb-3">ðŸ’¬</div>
            <h3 class="text-xl font-bold mb-3">Join Our Discord Community</h3>
            <p class="text-base text-text-muted mb-4">
              Get notified about upcoming hackathons worldwide, meet your team before events, and connect with the global C4C community.
            </p>
            <a href="https://discord.gg/qewprMy7G6" target="_blank" rel="noopener noreferrer" class="btn btn-info btn-lg inline-block">
              Join Discord â†’
            </a>
            <p class="text-sm text-text-muted mt-3">
              <strong>Required:</strong> Join Discord at least 1 week before any hackathon to be placed in teams.
            </p>
          </div>

          <!-- Upcoming Hackathons -->
          <div class="mb-8">
            <h3 class="text-2xl font-bold mb-4">Upcoming Hackathons</h3>

            <div class="card border-l-4 border-gray-400 bg-gray-50">
              <div class="text-center py-6">
                <div class="text-4xl mb-3">ðŸ“…</div>
                <h4 class="text-xl font-bold mb-2">No Upcoming Hackathons Scheduled</h4>
                <p class="text-base text-text-muted mb-4">
                  We're currently planning our next round of global hackathons. Join our Discord to be the first to know when new events are announced!
                </p>
                <a href="https://discord.gg/qewprMy7G6" target="_blank" rel="noopener noreferrer" class="btn btn-info">
                  Join Discord for Updates â†’
                </a>
              </div>
            </div>
          </div>

          <!-- Past Events -->
          <div class="mb-6">
            <h3 class="text-2xl font-bold mb-4">Past Events</h3>

            <!-- DC Hackathon (Past) -->
            <div class="card border-l-4 border-gray-400 mb-4 opacity-75">
              <div class="flex items-start justify-between gap-4 mb-3">
                <div>
                  <span class="inline-block bg-gray-200 text-gray-600 text-xs font-bold px-2 py-1 rounded mb-2">COMPLETED</span>
                  <h4 class="text-xl font-bold">Code 4 Compassion DC</h4>
                  <p class="text-base text-text-muted">November 9, 2025 â€¢ Washington, DC</p>
                </div>
                <div class="text-3xl">ðŸ‡ºðŸ‡¸</div>
              </div>
              <p class="text-sm text-text-muted">
                Held at The George Washington University Law School. Paired legal professionals with developers to prototype AI-powered tools for animal protection law.
              </p>
            </div>

            <!-- Berlin Hackathon (Past) -->
            <div class="card border-l-4 border-gray-400 mb-4 opacity-75">
              <div class="flex items-start justify-between gap-4 mb-3">
                <div>
                  <span class="inline-block bg-gray-200 text-gray-600 text-xs font-bold px-2 py-1 rounded mb-2">COMPLETED</span>
                  <h4 class="text-xl font-bold">Code 4 Compassion Berlin</h4>
                  <p class="text-base text-text-muted">November 16, 2025 â€¢ Berlin, Germany</p>
                </div>
                <div class="text-3xl">ðŸ‡©ðŸ‡ª</div>
              </div>
              <p class="text-sm text-text-muted">
                Berlin's first AI for animals hackathon at ProVeg International. Part of the Kickstarting 4 Good Summit.
              </p>
            </div>

            <!-- Other Past Locations -->
            <div class="card bg-surface">
              <h4 class="font-bold mb-2">Other Previous Locations</h4>
              <p class="text-base text-text-muted mb-2">
                London â€¢ Silicon Valley â€¢ Mumbai
              </p>
              <p class="text-sm text-text-muted">
                <strong>Join Discord to be notified when we announce the next hackathons in your region.</strong>
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Questions -->
      <div class="text-center card bg-surface">
        <h2 class="text-2xl font-bold mb-3">Questions?</h2>
        <p class="text-text-muted mb-4">
          Read more about the <a href="/programs" class="text-primary font-bold hover:underline">programs</a> or
          the <a href="/framework" class="text-primary font-bold hover:underline">framework</a>.
        </p>
        <p class="text-sm text-text-muted">
          Or email us: <a href="mailto:info@codeforcompassion.com" class="font-bold">info@codeforcompassion.com</a>
        </p>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
.program-selector.active-program {
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1) !important;
  transform: scale(1.02) !important;
}

#show-bootcamp.active-program {
  background: linear-gradient(to bottom right, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.05)) !important;
  border-color: rgb(59, 130, 246) !important;
  border-width: 3px !important;
}

#show-hackathon.active-program {
  background: linear-gradient(to bottom right, rgba(34, 211, 238, 0.15), rgba(34, 211, 238, 0.05)) !important;
  border-color: rgb(34, 211, 238) !important;
  border-width: 3px !important;
}

#show-incubator.active-program {
  background: linear-gradient(to bottom right, rgba(251, 146, 60, 0.15), rgba(251, 146, 60, 0.05)) !important;
  border-color: rgb(251, 146, 60) !important;
  border-width: 3px !important;
}
</style>

<script>
// Toggle between bootcamp, incubator, and hackathon
const showBootcampBtn = document.getElementById('show-bootcamp');
const showIncubatorBtn = document.getElementById('show-incubator');
const showHackathonBtn = document.getElementById('show-hackathon');
const bootcampForm = document.getElementById('bootcamp');
const incubatorForm = document.getElementById('incubator');
const hackathonSection = document.getElementById('hackathon');

function showSection(section: string, shouldScroll = true) {
  // Hide all sections
  bootcampForm?.classList.add('hidden');
  incubatorForm?.classList.add('hidden');
  hackathonSection?.classList.add('hidden');

  // Remove active state from all buttons
  showBootcampBtn?.classList.remove('active-program');
  showIncubatorBtn?.classList.remove('active-program');
  showHackathonBtn?.classList.remove('active-program');

  // Show requested section and activate button
  let targetElement = null;
  if (section === 'bootcamp') {
    bootcampForm?.classList.remove('hidden');
    showBootcampBtn?.classList.add('active-program');
    targetElement = bootcampForm;
  } else if (section === 'incubator') {
    incubatorForm?.classList.remove('hidden');
    showIncubatorBtn?.classList.add('active-program');
    targetElement = incubatorForm;
  } else if (section === 'hackathon') {
    hackathonSection?.classList.remove('hidden');
    showHackathonBtn?.classList.add('active-program');
    targetElement = hackathonSection;
  }

  // Scroll with header offset
  if (shouldScroll && targetElement) {
    const headerOffset = 80;
    const elementPosition = targetElement.getBoundingClientRect().top;
    const offsetPosition = elementPosition + window.scrollY - headerOffset;

    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth'
    });
  }
}

showBootcampBtn?.addEventListener('click', () => showSection('bootcamp'));
showIncubatorBtn?.addEventListener('click', () => showSection('incubator'));
showHackathonBtn?.addEventListener('click', () => showSection('hackathon'));

// Check for URL hash on page load, or show bootcamp by default
window.addEventListener('DOMContentLoaded', () => {
  const hash = window.location.hash.substring(1); // Remove the '#'
  if (hash === 'bootcamp') {
    showSection('bootcamp', true);
  } else if (hash === 'incubator') {
    showSection('incubator', true);
  } else if (hash === 'hackathon') {
    showSection('hackathon', true);
  } else {
    // No hash - show bootcamp by default without scrolling
    showSection('bootcamp', false);
  }
});

// Toast notification system
const toast = {
  container: null as HTMLElement | null,

  ensureContainer() {
    if (!this.container) {
      this.container = document.createElement('div');
      this.container.id = 'c4c-toast-container';
      this.container.style.cssText = `
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      `;
      document.body.appendChild(this.container);
    }
    return this.container;
  },

  show(type: 'success' | 'error' | 'warning' | 'info', message: string, title?: string) {
    const container = this.ensureContainer();
    const styles = {
      success: { bg: '#ecfdf5', border: '#a7f3d0', icon: '#059669', iconBg: '#d1fae5' },
      error: { bg: '#fef2f2', border: '#fecaca', icon: '#dc2626', iconBg: '#fee2e2' },
      warning: { bg: '#fffbeb', border: '#fde68a', icon: '#d97706', iconBg: '#fef3c7' },
      info: { bg: '#ecfeff', border: '#a5f3fc', icon: '#0891b2', iconBg: '#cffafe' },
    };
    const icons = {
      success: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />',
      error: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />',
      warning: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />',
      info: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />',
    };
    const s = styles[type];

    const toastEl = document.createElement('div');
    toastEl.setAttribute('role', 'alert');
    toastEl.style.cssText = `
      background: ${s.bg};
      border: 1px solid ${s.border};
      border-radius: 0.5rem;
      box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
      padding: 1rem;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      max-width: 24rem;
      animation: slideInRight 300ms ease-out;
    `;

    toastEl.innerHTML = `
      <div style="background: ${s.iconBg}; color: ${s.icon}; padding: 0.375rem; border-radius: 9999px; flex-shrink: 0;">
        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">${icons[type]}</svg>
      </div>
      <div style="flex: 1; min-width: 0;">
        ${title ? `<p style="font-weight: 600; color: #111827; font-size: 0.875rem; margin: 0 0 0.25rem 0;">${title}</p>` : ''}
        <p style="color: #374151; font-size: 0.875rem; margin: 0;">${message}</p>
      </div>
      <button style="flex-shrink: 0; color: #9ca3af; background: none; border: none; cursor: pointer;" aria-label="Dismiss">
        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    `;

    const closeBtn = toastEl.querySelector('button');
    const dismiss = () => {
      toastEl.style.opacity = '0';
      toastEl.style.transform = 'translateX(100%)';
      toastEl.style.transition = 'all 200ms ease-out';
      setTimeout(() => toastEl.remove(), 200);
    };
    closeBtn?.addEventListener('click', dismiss);
    setTimeout(dismiss, 6000);

    container.appendChild(toastEl);
  },

  success(message: string, title?: string) { this.show('success', message, title); },
  error(message: string, title?: string) { this.show('error', message, title); },
  warning(message: string, title?: string) { this.show('warning', message, title); },
  info(message: string, title?: string) { this.show('info', message, title); },
};

// Form handling with Supabase
async function handleFormSubmit(e, program) {
  e.preventDefault();
  const form = e.target;
  const submitButton = form.querySelector('button[type="submit"]');
  const formData = new FormData(form);

  // Get form values
  const data = {
    program,
    name: formData.get('name'),
    email: formData.get('email'),
    whatsapp: formData.get('whatsapp'),
    location: formData.get('location'),
    discord: formData.get('discord'),
    password: formData.get('password'),
    confirmPassword: formData.get('confirmPassword'),
  };

  // Add program-specific fields
  if (program === 'bootcamp') {
    data.interests = Array.from(form.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.nextElementSibling?.textContent);
    data.motivation = formData.get('motivation');
    data.technicalExperience = formData.get('technicalExperience');
    data.commitment = formData.get('commitment');
  } else if (program === 'accelerator') {
    data.track = formData.get('track');
    data.projectName = formData.get('projectName');
    data.projectDescription = formData.get('projectDescription');
    data.prototypeLink = formData.get('prototypeLink');
    data.techStack = formData.get('techStack');
    data.targetUsers = formData.get('targetUsers');
    data.productionNeeds = formData.get('productionNeeds');
    data.technicalExperience = formData.get('technicalExperience');
    data.teamSize = formData.get('teamSize');
    data.currentStage = formData.get('currentStage');
    data.commitment = formData.get('commitment');
    data.funding = formData.get('funding');
  }

  // Validate passwords match
  if (data.password !== data.confirmPassword) {
    toast.error('Passwords do not match. Please try again.', 'Validation Error');
    return;
  }

  // Disable button and show loading
  submitButton.disabled = true;
  submitButton.textContent = 'Submitting...';

  try {
    const response = await fetch('/api/apply', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });

    const result = await response.json();

    if (response.ok) {
      toast.success(result.message || 'Application submitted! Check your email to verify your account.', 'Application Received');
      form.reset();
    } else {
      toast.error(result.error || 'Failed to submit application. Please try again.', 'Submission Failed');
    }
  } catch (error) {
    console.error('Submission error:', error);
    toast.error('An error occurred. Please try again later.', 'Error');
  } finally {
    submitButton.disabled = false;
    submitButton.textContent = program === 'bootcamp' ? 'Submit Bootcamp Application' : 'Submit Accelerator Application';
  }
}

// Attach handlers
document.getElementById('bootcamp-form')?.addEventListener('submit', (e) => handleFormSubmit(e, 'bootcamp'));
document.getElementById('accelerator-form')?.addEventListener('submit', (e) => handleFormSubmit(e, 'accelerator'));
</script>
